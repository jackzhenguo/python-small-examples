54 global 声明全局变量
----------------------

先回答为什么要有\ ``global``\ ，一个变量被多个函数引用，想让全局变量被所有函数共享。有的伙伴可能会想这还不简单，这样写：

.. code:: python

   i = 5
   def f():
       print(i)

   def g():
       print(i)
       pass

   f()
   g()

f和g两个函数都能共享变量\ ``i``\ ，程序没有报错，所以他们依然不明白为什么要用\ ``global``.

但是，如果我想要有个函数对\ ``i``\ 递增，这样：

.. code:: python

   def h():
       i += 1

   h()

此时执行程序，bang, 出错了！
抛出异常：\ ``UnboundLocalError``\ ，原来编译器在解释\ ``i+=1``\ 时会把\ ``i``\ 解析为函数\ ``h()``\ 内的局部变量，很显然在此函数内，编译器找不到对变量\ ``i``\ 的定义，所以会报错。

``global``\ 就是为解决此问题而被提出，在函数h内，显示地告诉编译器\ ``i``\ 为全局变量，然后编译器会在函数外面寻找\ ``i``\ 的定义，执行完\ ``i+=1``\ 后，\ ``i``\ 还为全局变量，值加1：

.. code:: python

   i = 0
   def h():
       global i
       i += 1

   h()
   print(i)

.. _header-n1583:
